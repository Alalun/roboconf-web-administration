<h1>{{ appName }}</h1>

<p>
	Check all the instances of the application <strong>{{ appName }}</strong>.<br />
</p>

<!-- A dynamic template to build a tree with AngularJS -->
<script type="text/ng-template" id="my-tmpl">
    <p ng-click="setSelectedInstance( childNode.instance )">
		<strong>{{ childNode.instance.name }}</strong> is {{ formatStatus( childNode.instance.status )}}.
	</p>
    <ul>
        <li ng-repeat="childNode in childNode.children" ng-include="'my-tmpl'"></li>
    </ul>
</script>

<!-- No connection to the server -->
<div class="block" ng-show="! noError && rootUrl != ''">
	<p class="block-title">Oops</p>
	
	<div class="block-content">
		<p>
			An error occurred.<br />
			Communication with the server failed. Make sure the Deployment Manager is started.
		</p>
		<p>
			The Deployment Manager is hosted at <strong>{{ rootUrl }}</strong>.<br />
			This URL can be changed in <a href="#/settings">the settings page</a>.
		</p>
	</div>
</div>

<!-- Display the hierarchy of instances -->
<div ng-repeat="rootNode in rootNodes" class="block short-block">
	<p class="block-title" ng-click="setSelectedInstance( rootNode.instance )">
		{{ rootNode.instance.name }}
		<span class="block-annotation">{{ formatStatus( rootNode.instance.status )}}</span>
	</p>
	
	<ul>
		<li ng-repeat="childNode in rootNode.children" ng-include="'my-tmpl'"></li>
	</ul>
</div>

<!-- Display the details of an instance -->
<div id="instance-overview" ng-show="selectedInstance">
	<h3>{{ selectedInstance.name }}</h3>
	
	<strong>Instance Path:</strong> {{ selectedInstance.path }}<br />
	<strong>Instance Status:</strong> {{ formatStatus( selectedInstance.status )}}<br />
	<strong>Component:</strong> {{ selectedInstance.component.name }}
	
	<div class="instance-actions" ng-include="template"></div>
</div>
